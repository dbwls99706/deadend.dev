{
  "schema_version": "1.0.0",
  "id": "git/submodule-update-failed/git2-linux",
  "url": "https://deadends.dev/git/submodule-update-failed/git2-linux",
  "error": {
    "signature": "Failed to recurse into submodule path â€” submodule update/checkout failure",
    "regex": "(?:Failed to recurse into submodule|fatal:.*submodule.*(?:update|checkout|fetch)|Unable to checkout.*submodule|Submodule path.*not initialized|reference is not a tree)",
    "domain": "git",
    "category": "submodule_error",
    "first_seen": "2017-01-01",
    "last_confirmed": "2026-02-14"
  },
  "environment": {
    "runtime": {
      "name": "git",
      "version_range": ">=2.0,<3.0"
    },
    "os": "linux",
    "additional": {
      "common_contexts": [
        "Cloning a repo with submodules for the first time",
        "Updating submodule references after upstream changes",
        "CI/CD builds failing due to submodule fetch errors",
        "Switching branches with different submodule states"
      ]
    }
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.87,
    "confidence": 0.89,
    "last_updated": "2026-02-14",
    "summary": "Submodule update failures occur when: the submodule isn't initialized, the referenced commit doesn't exist in the submodule repo, network issues prevent fetching, or the .gitmodules config has incorrect URLs. The error 'reference is not a tree' means the parent repo references a submodule commit that the submodule repo doesn't have."
  },
  "dead_ends": [
    {
      "action": "Running git pull expecting submodules to update automatically",
      "why_fails": "git pull only updates the parent repository. Submodules are pinned to specific commits and must be explicitly updated with 'git submodule update'. The parent repo records WHICH commit to use, but doesn't automatically fetch/checkout that commit in the submodule directory.",
      "fail_rate": 0.9,
      "sources": [
        "https://git-scm.com/docs/git-submodule"
      ],
      "condition": ""
    },
    {
      "action": "Deleting the submodule directory and re-cloning it manually",
      "why_fails": "Manually cloning into the submodule directory creates a standalone repo that's disconnected from the parent's submodule tracking. The .git link, index entries, and .gitmodules configuration won't be properly set up. Use 'git submodule deinit' followed by 'git submodule update --init' instead.",
      "fail_rate": 0.85,
      "sources": [
        "https://git-scm.com/docs/git-submodule"
      ],
      "condition": ""
    },
    {
      "action": "Committing submodule changes without pushing the submodule repo first",
      "why_fails": "When you make commits inside a submodule and update the parent to reference the new commit, you must push the submodule BEFORE pushing the parent. Otherwise, other clones will reference a submodule commit that doesn't exist on the remote, causing 'reference is not a tree' errors.",
      "fail_rate": 0.88,
      "sources": [
        "https://git-scm.com/docs/git-submodule"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Initialize and update submodules recursively",
      "success_rate": 0.93,
      "how": "Run 'git submodule update --init --recursive'. This initializes any uninitialized submodules, fetches the referenced commits, and checks them out. The --recursive flag handles nested submodules. For initial clone, use 'git clone --recurse-submodules <url>'.",
      "sources": [
        "https://git-scm.com/docs/git-submodule"
      ],
      "condition": ""
    },
    {
      "action": "Force sync submodule URLs from .gitmodules",
      "success_rate": 0.88,
      "how": "If submodule URLs have changed, run 'git submodule sync --recursive' to update the submodule remote URLs from .gitmodules, then 'git submodule update --init --recursive' to fetch and checkout. This fixes issues when the submodule repo has moved.",
      "sources": [
        "https://git-scm.com/docs/git-submodule"
      ],
      "condition": "When submodule URLs have changed"
    },
    {
      "action": "Deinitialize and re-initialize a broken submodule",
      "success_rate": 0.9,
      "how": "Run 'git submodule deinit -f <path>' to remove the submodule working directory and config, then 'git submodule update --init <path>' to re-clone and checkout. This is the clean reset for a broken submodule.",
      "tradeoff": "Deletes any local changes in the submodule directory",
      "sources": [
        "https://git-scm.com/docs/git-submodule"
      ],
      "condition": "When the submodule is in a corrupted or inconsistent state"
    },
    {
      "action": "Use git push --recurse-submodules=on-demand to auto-push submodules",
      "success_rate": 0.87,
      "how": "Run 'git push --recurse-submodules=on-demand' to automatically push submodule commits before pushing the parent. Or set it as default: 'git config push.recurseSubmodules on-demand'. This prevents the 'reference is not a tree' error for other developers.",
      "sources": [
        "https://git-scm.com/docs/git-push"
      ],
      "condition": "When you make commits inside submodules"
    }
  ],
  "transition_graph": {
    "leads_to": [],
    "preceded_by": [],
    "frequently_confused_with": [
      {
        "error_id": "git/submodule-not-initialized/git2-linux",
        "distinction": "submodule-not-initialized is specifically about missing 'git submodule init'. submodule-update-failed covers broader failures including network issues, missing referenced commits, and URL mismatches."
      }
    ]
  },
  "metadata": {
    "generated_by": "manual",
    "generation_date": "2026-02-14",
    "review_status": "human_reviewed",
    "evidence_count": 70,
    "last_verification": "2026-02-14"
  }
}
